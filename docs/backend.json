
{
  "entities": {
    "itinerary": {
      "title": "Travel Itinerary",
      "description": "A structured travel plan for a trip, containing metadata and the full AI-generated itinerary data.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who created the itinerary."
        },
        "title": {
          "type": "string",
          "description": "A creative and descriptive title for the overall trip."
        },
        "destination": {
          "type": "string",
          "description": "The primary destination of the trip."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the itinerary was created."
        },
        "itineraryData": {
          "description": "The complete, nested JSON object returned by the AI generation process.",
          "$ref": "#/entities/itineraryAiData"
        }
      },
      "required": ["userId", "title", "destination", "createdAt", "itineraryData"]
    },
    "itineraryAiData": {
      "title": "AI Generated Itinerary Data",
      "description": "The full JSON payload as generated by the AI model.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "A creative and descriptive title for the overall trip."
        },
        "summary": {
          "type": "string",
          "description": "A brief, engaging summary of the trip plan."
        },
        "estimatedCost": {
          "type": "number",
          "description": "The estimated total cost of the trip in Indian Rupees (INR)."
        },
        "dailyPlans": {
          "type": "array",
          "description": "The day-by-day itinerary.",
          "items": {
            "$ref": "#/entities/dailyItinerary"
          }
        },
        "locations": {
          "type": "array",
          "description": "An array of all unique locations with coordinates from the itinerary.",
          "items": {
            "$ref": "#/entities/itineraryLocation"
          }
        }
      },
      "required": ["title", "summary", "dailyPlans", "locations", "estimatedCost"]
    },
    "dailyItinerary": {
      "title": "Daily Itinerary",
      "description": "The plan for a single day.",
      "type": "object",
      "properties": {
        "day": {
          "type": "number",
          "description": "The day number of the itinerary."
        },
        "title": {
          "type": "string",
          "description": "A short title for the day's plan."
        },
        "activities": {
          "type": "array",
          "description": "A list of activities for the day.",
          "items": {
            "$ref": "#/entities/activity"
          }
        }
      },
      "required": ["day", "title", "activities"]
    },
    "activity": {
      "title": "Activity",
      "description": "A single activity within a day's plan.",
      "type": "object",
      "properties": {
        "time": {
          "type": "string",
          "description": "e.g., Morning, Afternoon, Evening, 9:00 AM"
        },
        "description": {
          "type": "string",
          "description": "A description of the activity."
        },
        "location": {
          "$ref": "#/entities/itineraryLocation"
        }
      },
      "required": ["time", "description"]
    },
    "itineraryLocation": {
      "title": "Itinerary Location",
      "description": "A location with coordinates for an itinerary.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the location or activity."
        },
        "lat": {
          "type": "number",
          "description": "The latitude of the location."
        },
        "lng": {
          "type": "number",
          "description": "The longitude of the location."
        },
        "description": {
          "type": "string",
          "description": "A short description of the activity at this location."
        },
        "day": {
          "type": "number",
          "description": "The day number in the itinerary."
        }
      },
      "required": ["name", "lat", "lng", "description", "day"]
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/users/{userId}/itineraries/{itineraryId}": {
      "schema": {
        "$ref": "#/entities/itinerary"
      },
      "description": "Stores saved travel itineraries for each user. Each document contains metadata and the full nested AI-generated itinerary."
    }
  }
}
